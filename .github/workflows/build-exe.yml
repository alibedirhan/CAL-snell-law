name: Build Windows EXE

on:
  push:
    tags:
      - 'v*'  # v1.0.0, v1.1.0 gibi tag'ler iÃ§in Ã§alÄ±ÅŸÄ±r
  workflow_dispatch:  # Manuel olarak da Ã§alÄ±ÅŸtÄ±rabilirsiniz

jobs:
  build-windows:
    runs-on: windows-latest
    
    steps:
    - name: Checkout kod
      uses: actions/checkout@v4
      
    - name: Python kurulumu
      uses: actions/setup-python@v4
      with:
        python-version: '3.11'
        
    - name: Dependencies kurulumu
      run: |
        python -m pip install --upgrade pip
        pip install -r requirements.txt
        pip install pyinstaller
        
    - name: EXE dosyasÄ± oluÅŸtur
      run: |
        pyinstaller --onefile --windowed --name "SnellKanuluSimulatoru" SnellLaw.py
        
    - name: DosyalarÄ± kontrol et
      run: |
        dir dist\
        
    - name: Release oluÅŸtur
      if: startsWith(github.ref, 'refs/tags/')
      uses: softprops/action-gh-release@v1
      with:
        files: dist/SnellKanuluSimulatoru.exe
        body: |
          ## Snell Kanunu SimulatÃ¶rÃ¼ ${{ github.ref_name }}
          
          ### ğŸš€ HÄ±zlÄ± Ä°ndirme
          Windows kullanÄ±cÄ±larÄ± `SnellKanuluSimulatoru.exe` dosyasÄ±nÄ± indirip Ã§ift tÄ±klayarak Ã§alÄ±ÅŸtÄ±rabilir.
          
          ### âœ¨ Bu SÃ¼rÃ¼mdeki Yenilikler
          - Fizik hesaplamalarÄ± iyileÅŸtirildi
          - KullanÄ±cÄ± arayÃ¼zÃ¼ gÃ¼ncellenildi
          - Performans optimizasyonlarÄ±
          
          ### ğŸ“‹ Sistem Gereksinimleri
          - Windows 7/8/10/11
          - En az 10 MB boÅŸ alan
          - Kurulum gerektirmez!
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        
    - name: Upload artifact (eÄŸer tag yoksa)
      if: "!startsWith(github.ref, 'refs/tags/')"
      uses: actions/upload-artifact@v3
      with:
        name: SnellKanuluSimulatoru-exe
        path: dist/SnellKanuluSimulatoru.exe
